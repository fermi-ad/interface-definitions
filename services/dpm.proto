syntax = "proto3";

option java_multiple_files = false;
option java_package = "gov.fnal.controls.service.proto.grpc";
option java_outer_classname = "DPMProto";

package dpm;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

import "../common/device.proto";

service DPM {
    rpc Read(ReadingList) returns (stream ReadingReply) {}
    rpc Set(SettingList) returns (stream StatusReply) {}
}

message ReadingList {
    repeated string drf = 1;
}

message ReadingReply {
    uint32 index = 1;
    oneof value {
        Reading reading = 2;
        Status status = 3;
    }
}

message SettingList {
    repeated Setting setting = 1;
}

message Status {
    sint32 code = 1;
    string message = 2;
}

message StatusReply {
    uint32 index = 1;
    Status status = 2;
}
